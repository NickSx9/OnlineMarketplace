{"ast":null,"code":"import _classCallCheck from\"H:/Projects/OnlineMarketplace/OnlineMarketplace/OnlineMarketplace/ClientApp/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"H:/Projects/OnlineMarketplace/OnlineMarketplace/OnlineMarketplace/ClientApp/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"H:/Projects/OnlineMarketplace/OnlineMarketplace/OnlineMarketplace/ClientApp/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"H:/Projects/OnlineMarketplace/OnlineMarketplace/OnlineMarketplace/ClientApp/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import LiveStream from\"./LiveStream\";import React from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StartStream=/*#__PURE__*/function(_React$Component){_inherits(StartStream,_React$Component);var _super=_createSuper(StartStream);function StartStream(props){var _this;_classCallCheck(this,StartStream);_this=_super.call(this,props);_this.videoElement=/*#__PURE__*/React.createRef();_this.liveStream=new LiveStream();return _this;}_createClass(StartStream,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// Set up the webcam stream\nnavigator.mediaDevices.getUserMedia({video:true}).then(function(stream){_this2.videoElement.current.srcObject=stream;});// Set up a timer to send new frames to the server every 100 milliseconds\nthis.timer=setInterval(function(){_this2.sendFrame();},100);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){// Stop the timer when the component is unmounted\nclearInterval(this.timer);}},{key:\"sendFrame\",value:function sendFrame(){// Capture a frame from the webcam\nvar context=this.canvas.getContext(\"2d\");context.drawImage(this.videoElement.current,0,0,this.canvas.width,this.canvas.height);var frameData=context.getImageData(0,0,this.canvas.width,this.canvas.height).data.buffer;// Send the frame to the server\nthis.liveStream.sendFrame(frameData);}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"video\",{ref:this.videoElement}),/*#__PURE__*/_jsx(\"canvas\",{ref:function ref(canvas){return _this3.canvas=canvas;}})]});}}]);return StartStream;}(React.Component);export{StartStream as default};","map":{"version":3,"names":["LiveStream","React","StartStream","props","videoElement","createRef","liveStream","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","timer","setInterval","sendFrame","clearInterval","context","canvas","getContext","drawImage","width","height","frameData","getImageData","data","buffer","Component"],"sources":["H:/Projects/OnlineMarketplace/OnlineMarketplace/OnlineMarketplace/ClientApp/src/components/StartStream.js"],"sourcesContent":["import LiveStream from \"./LiveStream\";\r\nimport React from \"react\";\r\n\r\nexport default class StartStream extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.videoElement = React.createRef();\r\n        this.liveStream = new LiveStream();\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Set up the webcam stream\r\n        navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {\r\n            this.videoElement.current.srcObject = stream;\r\n        });\r\n\r\n        // Set up a timer to send new frames to the server every 100 milliseconds\r\n        this.timer = setInterval(() => {\r\n            this.sendFrame();\r\n        }, 100);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // Stop the timer when the component is unmounted\r\n        clearInterval(this.timer);\r\n    }\r\n\r\n    sendFrame() {\r\n        // Capture a frame from the webcam\r\n        const context = this.canvas.getContext(\"2d\");\r\n        context.drawImage(this.videoElement.current, 0, 0, this.canvas.width, this.canvas.height);\r\n        const frameData = context.getImageData(0, 0, this.canvas.width, this.canvas.height).data.buffer;\r\n\r\n        // Send the frame to the server\r\n        this.liveStream.sendFrame(frameData);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <video ref={this.videoElement} />\r\n                <canvas ref={canvas => this.canvas = canvas} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"],"mappings":"onBAAA,MAAOA,WAAP,KAAuB,cAAvB,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,2FAEqBC,Y,sHACjB,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EAEA,MAAKC,YAAL,cAAoBH,KAAK,CAACI,SAAN,EAApB,CACA,MAAKC,UAAL,CAAkB,GAAIN,WAAJ,EAAlB,CAJe,aAKlB,C,yDAED,4BAAoB,iBAChB;AACAO,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC,CAAEC,KAAK,CAAE,IAAT,CAApC,EAAqDC,IAArD,CAA0D,SAAAC,MAAM,CAAI,CAChE,MAAI,CAACR,YAAL,CAAkBS,OAAlB,CAA0BC,SAA1B,CAAsCF,MAAtC,CACH,CAFD,EAIA;AACA,KAAKG,KAAL,CAAaC,WAAW,CAAC,UAAM,CAC3B,MAAI,CAACC,SAAL,GACH,CAFuB,CAErB,GAFqB,CAAxB,CAGH,C,oCAED,+BAAuB,CACnB;AACAC,aAAa,CAAC,KAAKH,KAAN,CAAb,CACH,C,yBAED,oBAAY,CACR;AACA,GAAMI,QAAO,CAAG,KAAKC,MAAL,CAAYC,UAAZ,CAAuB,IAAvB,CAAhB,CACAF,OAAO,CAACG,SAAR,CAAkB,KAAKlB,YAAL,CAAkBS,OAApC,CAA6C,CAA7C,CAAgD,CAAhD,CAAmD,KAAKO,MAAL,CAAYG,KAA/D,CAAsE,KAAKH,MAAL,CAAYI,MAAlF,EACA,GAAMC,UAAS,CAAGN,OAAO,CAACO,YAAR,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,KAAKN,MAAL,CAAYG,KAAvC,CAA8C,KAAKH,MAAL,CAAYI,MAA1D,EAAkEG,IAAlE,CAAuEC,MAAzF,CAEA;AACA,KAAKtB,UAAL,CAAgBW,SAAhB,CAA0BQ,SAA1B,EACH,C,sBAED,iBAAS,iBACL,mBACI,oCACI,cAAO,GAAG,CAAE,KAAKrB,YAAjB,EADJ,cAEI,eAAQ,GAAG,CAAE,aAAAgB,MAAM,QAAI,OAAI,CAACA,MAAL,CAAcA,MAAlB,EAAnB,EAFJ,GADJ,CAMH,C,yBA1CoCnB,KAAK,CAAC4B,S,SAA1B3B,W"},"metadata":{},"sourceType":"module"}